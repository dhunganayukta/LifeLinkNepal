{% extends 'base.html' %}
{% load static %}

{% block title %}Edit Profile — {{ hospital.hospital_name }}{% endblock %}

{% block extra_css %}
<style>
.dash-wrap { background: var(--ivory); min-height: 100vh; padding: 0 0 80px; }

/* HERO */
.dash-hero { background: var(--ink); padding: 40px 0; position: relative; overflow: hidden; margin-bottom: 48px; }
.dash-hero::before { content:''; position:absolute; top:-100px; right:-100px; width:340px; height:340px; border-radius:50%; border:1px solid rgba(196,146,74,0.1); pointer-events:none; }
.dash-hero::after  { content:''; position:absolute; top:-60px; right:-60px; width:220px; height:220px; border-radius:50%; border:1px solid rgba(196,146,74,0.06); pointer-events:none; }
.dash-hero-crimson-bar { position:absolute; top:0; left:0; width:100%; height:3px; background:linear-gradient(90deg, var(--crimson), var(--gold), var(--crimson-light)); }
.dash-hero-eyebrow { display:inline-flex; align-items:center; gap:8px; margin-bottom:10px; }
.dash-hero-eyebrow span { font-size:10.5px; letter-spacing:3px; text-transform:uppercase; font-weight:600; color:var(--gold); }
.dash-hero-eyebrow-line { width:20px; height:1px; background:var(--gold); opacity:0.5; }
.dash-hero h2 { font-family:var(--font-display); font-size:clamp(26px,3.5vw,42px); font-weight:600; color:white; letter-spacing:-0.3px; line-height:1.15; margin-bottom:6px; }
.dash-hero-sub { font-size:14px; color:rgba(240,232,222,0.55); display:flex; align-items:center; gap:6px; }
.btn-hero-outline { display:inline-flex; align-items:center; gap:8px; padding:12px 26px; background:transparent; color:rgba(255,255,255,0.8); font-size:13.5px; font-weight:600; border-radius:8px; text-decoration:none; transition:all 0.25s ease; border:1.5px solid rgba(255,255,255,0.3); }
.btn-hero-outline:hover { background:rgba(255,255,255,0.1); color:white; border-color:rgba(255,255,255,0.5); }

/* FORM CARD */
.dash-card { background:white; border:1px solid var(--border-subtle); border-radius:14px; overflow:hidden; margin-bottom:24px; }
body.dark-mode .dash-card { background:#1a1410; border-color:rgba(255,255,255,0.06); }
.dash-card-header { padding:20px 24px; border-bottom:1px solid var(--border-subtle); display:flex; align-items:center; justify-content:space-between; background:var(--ivory-mid); }
body.dark-mode .dash-card-header { background:#221c17; border-color:rgba(255,255,255,0.05); }
.dash-card-title { font-family:var(--font-display); font-size:19px; font-weight:600; color:var(--ink); display:flex; align-items:center; gap:10px; }
.dash-card-title i { color:var(--crimson); font-size:16px; }
.dash-card-body { padding:28px 28px; }

/* FORM ELEMENTS */
.form-group { margin-bottom:22px; }
.form-label-styled { display:block; font-size:12px; letter-spacing:1.5px; text-transform:uppercase; font-weight:700; color:var(--ink-muted); margin-bottom:8px; }
.form-label-styled i { color:var(--crimson); margin-right:4px; }
.form-control-styled { width:100%; padding:11px 14px; background:var(--ivory-mid); border:1.5px solid var(--border-subtle); border-radius:8px; font-size:13.5px; color:var(--ink); font-family:var(--font-body, 'Jost', sans-serif); transition:all 0.2s ease; outline:none; }
body.dark-mode .form-control-styled { background:#221c17; border-color:rgba(255,255,255,0.08); color:var(--ink); }
.form-control-styled:focus { border-color:var(--crimson); background:white; box-shadow:0 0 0 3px rgba(155,23,40,0.08); }
body.dark-mode .form-control-styled:focus { background:#2a2018; }
.form-control-styled:disabled { opacity:0.5; cursor:not-allowed; }
.form-control-styled::placeholder { color:var(--ink-muted); opacity:0.6; }
.form-hint { font-size:11.5px; color:var(--ink-muted); margin-top:5px; }

/* BUTTONS */
.btn-save { display:inline-flex; align-items:center; gap:8px; padding:11px 28px; background:var(--crimson); color:white; font-size:13.5px; font-weight:700; border-radius:8px; border:1.5px solid var(--crimson); cursor:pointer; transition:all 0.25s ease; }
.btn-save:hover { background:var(--crimson-mid); border-color:var(--crimson-mid); transform:translateY(-1px); box-shadow:0 6px 18px rgba(155,23,40,0.3); }
.btn-cancel { display:inline-flex; align-items:center; gap:8px; padding:11px 22px; background:transparent; color:var(--ink-mid); font-size:13.5px; font-weight:600; border-radius:8px; border:1.5px solid var(--border-subtle); text-decoration:none; transition:all 0.2s ease; }
.btn-cancel:hover { border-color:var(--border); color:var(--ink); }

body.dark-mode .dash-wrap { background:var(--ivory); }
</style>
{% endblock %}

{% block content %}
<div class="dash-wrap">

    <!-- HERO -->
    <div class="dash-hero">
        <div class="dash-hero-crimson-bar"></div>
        <div class="container">
            <div class="row align-items-center g-4">
                <div class="col-lg-8">
                    <div class="dash-hero-eyebrow">
                        <div class="dash-hero-eyebrow-line"></div>
                        <span>Hospital Profile</span>
                        <div class="dash-hero-eyebrow-line"></div>
                    </div>
                    <h2>Edit Hospital Profile</h2>
                    <div class="dash-hero-sub">
                        <i class="bi bi-pencil-fill"></i>
                        Update your hospital information
                    </div>
                </div>
                <div class="col-lg-4 d-flex justify-content-lg-end">
                    <a href="{% url 'hospital_profile' %}" class="btn-hero-outline">
                        <i class="bi bi-arrow-left"></i> Back to Profile
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="row justify-content-center">
            <div class="col-lg-8">
                <div class="dash-card">
                    <div class="dash-card-header">
                        <div class="dash-card-title">
                            <i class="bi bi-hospital-fill"></i> Hospital Information
                        </div>
                    </div>
                    <div class="dash-card-body">
                        <form method="POST">
                            {% csrf_token %}
                            <div class="row g-0">

                                <!-- Hospital Name -->
                                <div class="col-12 form-group">
                                    <label class="form-label-styled"><i class="bi bi-hospital-fill"></i>Hospital Name</label>
                                    <input type="text" name="hospital_name" class="form-control-styled"
                                           value="{{ hospital.hospital_name }}" placeholder="Enter hospital name" required>
                                </div>

                                <div class="row g-3">
                                    <!-- Phone -->
                                    <div class="col-md-6 form-group">
                                        <label class="form-label-styled"><i class="bi bi-telephone-fill"></i>Phone Number</label>
                                        <input type="tel" name="phone" class="form-control-styled"
                                               value="{{ hospital.phone }}" placeholder="+977 ..." required>
                                    </div>

                                    <!-- Email (readonly) -->
                                    <div class="col-md-6 form-group">
                                        <label class="form-label-styled"><i class="bi bi-envelope-fill"></i>Email Address</label>
                                        <input type="email" class="form-control-styled"
                                               value="{{ hospital.user.email }}" disabled>
                                        <div class="form-hint">Contact admin to change email</div>
                                    </div>
                                </div>

                                <!-- Address -->
                                <div class="col-12 form-group">
                                    <label class="form-label-styled"><i class="bi bi-geo-alt-fill"></i>Address</label>
                                    <textarea name="address" class="form-control-styled" rows="3"
                                              placeholder="Full hospital address" required>{{ hospital.address }}</textarea>
                                    <div class="form-hint"><i class="bi bi-info-circle me-1"></i>Used for distance-based donor search and automatic geocoding</div>
                                </div>

                                <div class="row g-3">
                                    <!-- License -->
                                    <div class="col-md-6 form-group">
                                        <label class="form-label-styled"><i class="bi bi-card-text"></i>License Number</label>
                                        <input type="text" name="license_number" class="form-control-styled"
                                               value="{{ hospital.license_number|default_if_none:'' }}"
                                               placeholder="Optional">
                                        <div class="form-hint">Optional — can be updated later</div>
                                    </div>

                                    <!-- Account Created (readonly) -->
                                    <div class="col-md-6 form-group">
                                        <label class="form-label-styled"><i class="bi bi-calendar-check-fill"></i>Account Created</label>
                                        <input type="text" class="form-control-styled"
                                               value="{{ hospital.created_at|date:'M d, Y' }}" disabled>
                                    </div>
                                </div>

                                <!-- Buttons -->
                                <div class="col-12" style="padding-top:8px;">
                                    <div style="height:1px; background:var(--border-subtle); margin-bottom:20px;"></div>
                                    <div class="d-flex gap-2 justify-content-end">
                                        <a href="{% url 'hospital_profile' %}" class="btn-cancel">
                                            Cancel
                                        </a>
                                        <button type="submit" class="btn-save">
                                            <i class="bi bi-save-fill"></i> Save Changes
                                        </button>
                                    </div>
                                </div>

                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}